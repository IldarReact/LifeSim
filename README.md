# ArtSurv - Life Simulation Game

> **–ú–∞—Å—à—Ç–∞–± –ø—Ä–æ–µ–∫—Ç–∞**: ~1.5 GB –¥–∞–Ω–Ω—ã—Ö (–≤–∫–ª—é—á–∞—è –∞—Å—Å–µ—Ç—ã), 100+ –º–æ–¥—É–ª–µ–π –ª–æ–≥–∏–∫–∏, 50+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ UI.
> **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Data-Driven Design —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–∏–∫–∏ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

## üéÆ –û –ø—Ä–æ–µ–∫—Ç–µ

**ArtSurv** - —ç—Ç–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞-—Å–∏–º—É–ª—è—Ç–æ—Ä –∂–∏–∑–Ω–∏, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏.

**–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è "–ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è" –∂–∏–∑–Ω–∏ –≤ –∏–≥—Ä–µ, –≥–¥–µ –æ–Ω–∏ –º–æ–≥—É—Ç:
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏, –∫–∞—Ä—å–µ—Ä–Ω—ã–º–∏ –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏
- –£—á–∏—Ç—å—Å—è –∂–∏—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —Å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–æ–π
- –ü–æ–ª—É—á–∞—Ç—å –∏–Ω—Å–∞–π—Ç—ã –æ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –≤—ã–≥–æ–¥ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π

### üéØ –ö–ª—é—á–µ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –∏–≥—Ä—ã:
> **"–î–µ—à–µ–≤–∞—è –µ–¥–∞ –ø–æ–≤—ã—à–∞–µ—Ç —Å—á–∞—Å—Ç—å–µ —Å–µ–≥–æ–¥–Ω—è, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ –∑–∞–≤—Ç—Ä–∞"**

–ò–≥—Ä–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ.

---

## 1. üó∫Ô∏è –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ö–∞—Ä—Ç–∞ –ü–æ—Ç–æ–∫–æ–≤ –î–∞–Ω–Ω—ã—Ö (Data Flow)

```mermaid
graph TD
    A[Static Data JSON] -->|Loaders| B(Game State / Store)
    B -->|Selectors| C[UI Components]
    C -->|User Actions| D{Action Handlers}
    D -->|Mutations| B
    E[Game Loop / Turn] -->|Calculations| B
    B -->|Persistence| F[Local Storage / Save File]
    G[Business Data] -->|Player Employment| H[Jobs System]
```

---

## 2. üéÆ –ò–≥—Ä–æ–≤—ã–µ –ú–µ—Ö–∞–Ω–∏–∫–∏ –∏ –°–∏—Å—Ç–µ–º—ã

### üî¢ –°–∏—Å—Ç–µ–º–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫ (6 –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π)
| –°—Ç–∞—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –í–ª–∏—è–Ω–∏–µ | –ü–æ—Ä–æ–≥–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã |
|------|------------|---------|-------------------|
| **`money`** | –§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç—å, –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø–ª–∞—Ç–∏—Ç—å –ø–æ —Å—á–µ—Ç–∞–º | –ù–∏–∑–∫–∏–π –±–∞–ª–∞–Ω—Å -> —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫—Ä–∏–∑–∏—Å |
| **`happiness`** | –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ | –í–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è. | **<30** -> –Ω–µ—Å—á–∞—Å—Ç—å–µ, **<20** -> —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ, **<10** -> –≥–ª—É–±–æ–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è (—à—Ç—Ä–∞—Ñ—ã –∫ —Ä–∞–±–æ—Ç–µ) |
| **`energy`** | –≠–Ω–µ—Ä–≥–∏—è | –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π –∑–∞ —Ö–æ–¥ | –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å -> –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å |
| **`health`** | –§–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ–∫–æ–Ω—á–∞–Ω–∏—é –∏–≥—Ä—ã | **<30** -> —É—Ö—É–¥—à–µ–Ω–∏–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è, **<20** -> –ø–ª–æ—Ö–æ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ (—à—Ç—Ä–∞—Ñ –∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –º–µ–¥. —Ä–∞—Å—Ö–æ–¥—ã), **<10** -> —Ç—è–∂–µ–ª–∞—è –±–æ–ª–µ–∑–Ω—å (–≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –º–µ–¥. —Ä–∞—Å—Ö–æ–¥—ã, –Ω–µ–ª—å–∑—è —Ä–∞–±–æ—Ç–∞—Ç—å) |
| **`sanity`** | –ü—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ | –í–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π, –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å ‚Üí –¥–µ–ø—Ä–µ—Å—Å–∏—è | –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å -> –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–ª–ª–∞–ø—Å |
| **`intelligence`** | –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç | –í–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–≤–æ–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã | –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å -> –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è |

### ‚è∞ –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **1 —Ö–æ–¥ = 1 –∫–≤–∞—Ä—Ç–∞–ª** (3 –º–µ—Å—è—Ü–∞)
- **4 —Ö–æ–¥–∞ = 1 –≥–æ–¥**
- **–ö–∞–∂–¥—ã–π –≥–æ–¥ (Q1)** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Å—á–µ—Ç –∏–Ω—Ñ–ª—è—Ü–∏–∏ –∏ —Ä–æ—Å—Ç —Ü–µ–Ω

### üè¢ –ë–∏–∑–Ω–µ—Å-—Å–∏—Å—Ç–µ–º–∞
**–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**:
1. **–û—Ç–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ (–æ—Ç $10,000)
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
   - **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –ø—Ä–æ–¥—É–∫—Ü–∏–∏/—É—Å–ª—É–≥** - –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–ø—Ä–æ—Å –∏ –ø—Ä–∏–±—ã–ª—å
   - **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏** - –¥–ª—è —Ç–æ–≤–∞—Ä–Ω—ã—Ö –±–∏–∑–Ω–µ—Å–æ–≤
   - **–ù–∞–π–º/—É–≤–æ–ª—å–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** - NPC –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤–ª–∏—è—é—Ç –Ω–∞ KPI –±–∏–∑–Ω–µ—Å–∞ (–±—É—Ö–≥–∞–ª—Ç–µ—Ä—ã —Å–Ω–∏–∂–∞—é—Ç –Ω–∞–ª–æ–≥–∏, –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–≤—ã—à–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∏ —É–ª—É—á—à–∞—é—Ç —Ä–µ–ø—É—Ç–∞—Ü–∏—é).
3. **–ë–∏–∑–Ω–µ—Å-—Å–µ—Ç–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ —Ñ–∏–ª–∏–∞–ª–æ–≤ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ (—Ñ–∏–ª–∏–∞–ª—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ)

**–†–∞—Å—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –±–∏–∑–Ω–µ—Å–∞ (`core/lib/business/business-financials.ts`)**:
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∞—Ä–µ–Ω–¥—É, –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏.
- **–°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤**: –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ã –∏ –Ω–∞–≤—ã–∫–∏ –∏–≥—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–æ–ª—å "–º–µ–Ω–µ–¥–∂–µ—Ä–∞") –º–æ–≥—É—Ç —É–º–µ–Ω—å—à–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.
- **–†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤**: –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —É—á–µ—Ç–æ–º –≤–∞–ª–æ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏ –∏ –Ω–∞–ª–æ–≥–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏. –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ã –º–æ–≥—É—Ç —Å–Ω–∏–∂–∞—Ç—å –Ω–∞–ª–æ–≥–æ–≤–æ–µ –±—Ä–µ–º—è.
- **–î–æ—Ö–æ–¥ –æ—Ç –ø—Ä–æ–¥–∞–∂/—É—Å–ª—É–≥**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —Å–ø—Ä–æ—Å–∞, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å–∞, —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, —Ü–µ–Ω—ã, –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞ –∏ –Ω–∞–≤—ã–∫–æ–≤ –∏–≥—Ä–æ–∫–∞ (–±–æ–Ω—É—Å—ã –∫ –ø—Ä–æ–¥–∞–∂–∞–º).
  - **–¢–æ–≤–∞—Ä–Ω—ã–µ –±–∏–∑–Ω–µ—Å—ã**: –£–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞–ø–∞—Å–∞–º–∏ (currentStock, maxStock), –∞–≤—Ç–æ–∑–∞–∫—É–ø–∫–æ–π (autoPurchaseAmount).
  - **–£—Å–ª—É–≥–æ–≤—ã–µ –±–∏–∑–Ω–µ—Å—ã**: –î–æ—Ö–æ–¥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø—Ä–æ—Å–∞ –Ω–∞ —É—Å–ª—É–≥–∏.

**–†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –±–∏–∑–Ω–µ—Å–∞ (`core/lib/business/business-metrics.ts`)**:
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (0-100)**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —à—Ç–∞—Ç–∞, —Å—Ä–µ–¥–Ω–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –±–æ–Ω—É—Å–æ–≤ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –Ω–∞–≤—ã–∫–æ–≤ –∏–≥—Ä–æ–∫–∞ –∏ –Ω–µ–¥–∞–≤–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π. –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -> —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–æ–¥–∞–∂–∏.
- **–†–µ–ø—É—Ç–∞—Ü–∏—è (0-100)**: –ò–∑–º–µ–Ω—è–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ, —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ä–µ–¥–Ω–µ–π "–∑–≤–µ–∑–¥–Ω–æ—Å—Ç–∏" –∫–æ–º–∞–Ω–¥—ã, –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–≤, –Ω–∞–≤—ã–∫–æ–≤ –∏–≥—Ä–æ–∫–∞ –∏ —Å–æ–±—ã—Ç–∏–π.

**–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ NPC-–ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ (`core/lib/business/npc-voting.ts`)**:
- NPC –≥–æ–ª–æ—Å—É—é—Ç –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–µ—Ç–∏, –≤—ã–≤–æ–¥ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤).
- –ò—Ö —Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
    - **–û—Ç–Ω–æ—à–µ–Ω–∏–π —Å –∏–≥—Ä–æ–∫–æ–º** (–Ω–∏–∑–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è -> –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤ "–∏–∑ –≤—Ä–µ–¥–Ω–æ—Å—Ç–∏").
    - **–°–æ—Å—Ç–æ—è–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞** (–Ω–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -> –∑–∞ –ø–µ—Ä–µ–º–µ–Ω—ã; –≤—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -> –∑–∞ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—é —É—Å–ø–µ—Ö–∞).
    - **–¢–∏–ø–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** (–∑–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–µ—Ç–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –¥–µ–Ω—å–≥–∏; –∑–∞ –≤—ã–≤–æ–¥ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤, –µ—Å–ª–∏ –¥–µ–Ω–µ–≥ –º–Ω–æ–≥–æ).

**–°–æ–∑–¥–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞ (`core/lib/business/create-business.ts`)**:
- **`createBusinessObject`**: –ß–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ —Å –±–∞–∑–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (price, quantity, inventory, employees, reputation –∏ —Ç.–¥.). –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–∏–∑–Ω–µ—Å `isServiceBased`.
- **`createBusinessBranch`**: –ß–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª–∏–∞–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞.

**–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ):
- **–î–æ–ª–µ–≤–æ–µ —É—á–∞—Å—Ç–∏–µ** - –æ—Ç–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞ –ø–æ –¥–æ–ª—è–º
- **–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã, –Ω–∞–π–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ —Ç—Ä–µ–±—É—é—Ç —Å–æ–≥–ª–∞—Å–∏—è –ø–æ –¥–æ–ª—è–º

### üí∞ –ò–Ω—Ñ–ª—è—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (5 —Å–ª–æ–µ–≤)**:

**Layer 1 (Data)**: `economy.json` ‚Üí –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è —Å—Ç—Ä–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.5%)

**Layer 2 (Loaders)**: `economy-loader.ts` ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod, –∑–∞–≥—Ä—É–∑–∫–∞ –≤ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**Layer 3 (Logic)**: 
- `inflation-engine.ts` ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–¥–æ–≤–æ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º:
  - –ü—Ä–µ–¥—ã–¥—É—â–µ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ (damping factor 0.6)
  - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–∫—Ä–∏–∑–∏—Å—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç)
  - –ú–∏—Ä–æ–≤–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è (2.5%)
  - –ú–∏–Ω–∏–º—É–º 0.1%, –º–∞–∫—Å–∏–º—É–º 20%
- `price-helpers.ts` ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏ –∫ —Ü–µ–Ω–∞–º:
  - `getInflatedPrice()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
  - `getInflatedHousingPrice()` - –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
  - `getInflatedEducationPrice()` - –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
  - `getInflatedShopPrice()` - –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤

**Layer 4 (State)**: 
- `inflation-processor.ts` ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ñ–ª—è—Ü–∏–∏ **–¢–û–õ–¨–ö–û –≤ Q1**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `countries[id].inflation` –∏ `inflationHistory[]`
- –ò—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è: `[current, year-1, year-2, ...]` (–¥–æ 10 –ª–µ—Ç)

**Layer 5 (UI)**: 
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getInflated*Price()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `inflation-notification.tsx` ‚Üí –ø–æ–∫–∞–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–≥—Ä–æ–∫—É

**–ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã** (–∫–∞–∫ –±—ã—Å—Ç—Ä–æ —Ä–∞—Å—Ç—É—Ç —Ü–µ–Ω—ã):
- `housing: 1.5x` - –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ
- `realEstate: 1.5x` - –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
- `business: 1.3x` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞
- `education: 1.2x` - –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–æ—Ä–æ–∂–∞–µ—Ç
- `health: 1.1x` - –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `transport: 1.0x` - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (—Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å)
- `services: 0.9x` - —É—Å–ª—É–≥–∏ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- `food: 0.5x` - –µ–¥–∞ (—Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç)
- `default: 1.0x` - –æ—Å—Ç–∞–ª—å–Ω–æ–µ

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞**:
```typescript
// –ì–æ–¥ 1: –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è 2.5%
// –ì–æ–¥ 2: 2.5% * 0.6 (damping) + 2.5% * 0.4 (world avg) + random ‚âà 2.3-2.8%
// –ñ–∏–ª—å—ë –∑–∞ $100,000:
// - –ì–æ–¥ 1: $100,000 * (1 + 2.5% * 1.5) = $103,750
// - –ì–æ–¥ 2 (–∏–Ω—Ñ–ª—è—Ü–∏—è 2.7%): $103,750 * (1 + 2.7% * 1.5) = $107,956
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞**:
- –ò–Ω—Ñ–ª—è—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **1 —Ä–∞–∑ –≤ –≥–æ–¥** (Q1, turn % 4 === 1)
- –¶–µ–Ω—ã **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∞–¥–∞—é—Ç** (–º–∏–Ω–∏–º—É–º 0.1%)
- –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è ‚Üí –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
- –†–∞–∑–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ç—É—Ç —Å —Ä–∞–∑–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é

### üß† –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—ã–∫–æ–≤
- **–ë–µ–∑ –Ω–∞–≤—ã–∫–æ–≤** - –Ω–µ–ª—å–∑—è —É—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É
- **–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤**:
  - –û–±—É—á–µ–Ω–∏–µ (–∫—É—Ä—Å—ã, —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã)
  - –†–∞–±–æ—Ç–∞ (—Ä–∞–∑–≤–∏—Ç–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫—É)
  - **–ö–æ–ª-–≤–æ –∑–≤–µ–∑–¥** - —É—Ä–æ–≤–µ–Ω—å –≤–ª–∞–¥–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–º (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ª–µ–≥–∫–∞—è)

---

## 3. üóÑÔ∏è Layer 1: Static Data (–§—É–Ω–¥–∞–º–µ–Ω—Ç)
*–ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –±–∞–ª–∞–Ω—Å –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã.*

### üåç World & Economy (–ú–∏—Ä –∏ –≠–∫–æ–Ω–æ–º–∏–∫–∞)
| –§–∞–π–ª / –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `shared/data/world/countries.json` | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞–Ω | –°–®–ê, –ì–µ—Ä–º–∞–Ω–∏—è, –ë—Ä–∞–∑–∏–ª–∏—è |
| `shared/data/world/country-archetypes.json` | –ê—Ä—Ö–µ—Ç–∏–ø—ã —ç–∫–æ–Ω–æ–º–∏–∫ | rich/poor –∞—Ä—Ö–µ—Ç–∏–ø—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–∞–ª–æ–≥–æ–≤ –∏ –∏–Ω—Ñ–ª—è—Ü–∏–∏ |
| `shared/data/world/commons/skills.json` | –ù–∞–≤—ã–∫–∏ –∏–≥—Ä–æ–∫–∞ | –î–µ—Ä–µ–≤–æ –Ω–∞–≤—ã–∫–æ–≤ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ |
| `shared/data/world/commons/human-traits.json` | –ß–µ—Ä—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ | –í–ª–∏—è–Ω–∏–µ —á–µ—Ä—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ NPC |

### üèôÔ∏è Country Specifics (–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ö–æ–Ω—Ç–µ–Ω—Ç–∞)
*–î–∞–Ω–Ω—ã–µ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã (US, Germany, Brazil).*

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –°–®–ê (`shared/data/world/countries/us/`)**:
| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ |
| :--- | :--- | :--- |
| `businesses.json` | –¢–∏–ø—ã –±–∏–∑–Ω–µ—Å–æ–≤ | initialCost, maxEmployees, requiredRoles |
| `characters.json` | NPC –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ | name, traits, relationship |
| `courses.json` | –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã | name, cost, skillBonus, duration |
| `economy.json` | –≠–∫–æ–Ω–æ–º–∏–∫–∞ —Å—Ç—Ä–∞–Ω—ã | gdpGrowth, inflation, unemployment |
| `freelance.json` | –§—Ä–∏–ª–∞–Ω—Å –ø—Ä–æ–µ–∫—Ç—ã | title, payment, requirements |
| `housing.json` | –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å | type, price, monthlyRent |
| `jobs.json` | –í–∞–∫–∞–Ω—Å–∏–∏ —Ä–∞–±–æ—Ç—ã | title, salary, requirements |
| `npcs.json` | NPC –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è | name, traits, relationship |
| `rest.json` | –û—Ç–¥—ã—Ö –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è | type, cost, statEffects |
| `transport.json` | –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç | type, cost, efficiency |
| `shop-categories/` | –¢–æ–≤–∞—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ | food.json, health.json, services.json |

### üß© Game Mechanics (–ò–≥—Ä–æ–≤–∞—è –ú–µ—Ö–∞–Ω–∏–∫–∞)
| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `shared/data/events/crisis-options.json` | –°—Ü–µ–Ω–∞—Ä–∏–∏ –∫—Ä–∏–∑–∏—Å–æ–≤ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π |
| `shared/data/business/business-events.json` | –°–æ–±—ã—Ç–∏—è –≤ –±–∏–∑–Ω–µ—Å–µ | –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–æ–≤ |
| `shared/data/business/idea-templates.json` | –®–∞–±–ª–æ–Ω—ã –±–∏–∑–Ω–µ—Å-–∏–¥–µ–π | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –¥–ª—è –∏–≥—Ä–æ–∫–∞ |
| `shared/data/employees/employee-data.json` | –î–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è –Ω–∞–π–º–∞ |
| `shared/data/housing/housing-options.json` | –û–ø—Ü–∏–∏ –∂–∏–ª—å—è | –†—ã–Ω–æ–∫ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ |

---

## 4. ‚öôÔ∏è Layer 2: Data Ingestion (–ó–∞–≥—Ä—É–∑—á–∏–∫–∏)
*–ú–æ–¥—É–ª–∏, –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—â–∏–µ —Å—ã—Ä—ã–µ JSON –≤ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã TypeScript.*

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/lib/data-loaders/`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–≤**: **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ runtime** –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–∞–º Zod.

| Loader Module | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö | –í—ã—Ö–æ–¥–Ω–æ–π —Ç–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| `economy-loader.ts` | `economy.json` | `EconomyConfig` | –ó–∞–≥—Ä—É–∑–∫–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —Å—Ç—Ä–∞–Ω—ã |
| `jobs-loader.ts` | `jobs.json` | `JobOpportunity[]` | –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π —Ä–∞–±–æ—Ç—ã |
| `housing-loader.ts` | `housing.json` | `RealEstateListing[]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ |
| `businesses-loader.ts` | `businesses.json` | `BusinessType[]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–æ–≤ –±–∏–∑–Ω–µ—Å–æ–≤ |
| `characters-loader.ts` | `characters.json` | `NpcTemplate[]` | –ó–∞–≥—Ä—É–∑–∫–∞ NPC –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π |
| `shop-categories-loader.ts` | `shop-categories/*.json` | `ShopItem[]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞ |
| `courses-loader.ts` | `courses.json` | `Course[]` | –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ |
| `freelance-loader.ts` | `freelance.json` | `FreelanceProject[]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ—Ä–∏–ª–∞–Ω—Å –ø—Ä–æ–µ–∫—Ç–æ–≤ |
| `skills-loader.ts` | `skills.json` | `SkillDefinition[]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–∞–≤—ã–∫–æ–≤ |
| `static-data-loader.ts` | –í—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ | `StaticGameData` | –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö |

**–í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–≤**: 15+ –º–æ–¥—É–ª–µ–π —Å **runtime validation —á–µ—Ä–µ–∑ Zod**

---

## 5. üß† Layer 3: Core Logic (–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ø–¥—Ä–æ)
*–ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π.*

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/lib/`

### üí∞ Financial Engine (–§–∏–Ω–∞–Ω—Å—ã)

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏—è | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- | :--- | :--- |
| `calculations/calculateQuarterlyIncome.ts` | –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–æ–≤ | –ó–∞—Ä–ø–ª–∞—Ç–∞, –î–∏–≤–∏–¥–µ–Ω–¥—ã, –ë–∏–∑–Ω–µ—Å | `TotalIncome` | –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–æ—Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞ |
| `calculations/calculateQuarterlyExpenses.ts` | –†–∞—Å—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ | –ñ–∏–ª—å–µ, –ï–¥–∞, –ö—Ä–µ–¥–∏—Ç—ã, –ù–∞–ª–æ–≥–∏ | `TotalExpenses` | –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–≥—Ä–æ–∫–∞ |
| `calculations/calculateQuarterlyTaxes.ts` | –ù–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ | –î–æ—Ö–æ–¥, –°—Ç—Ä–∞–Ω–∞, –õ—å–≥–æ—Ç—ã | `TaxAmount` | –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Ö–æ–¥–∞ –∏ —Å—Ç—Ä–∞–Ω—ã |
| `calculations/inflation-engine.ts` | **–î–≤–∏–∂–æ–∫ –∏–Ω—Ñ–ª—è—Ü–∏–∏** | –≠–∫–æ–Ω–æ–º–∏–∫–∞ —Å—Ç—Ä–∞–Ω—ã, —Å–æ–±—ã—Ç–∏—è | `number` (–Ω–æ–≤–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è) | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–¥–æ–≤–æ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ–Ω–¥–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π |
| `calculations/price-helpers.ts` | **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏** | –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞, —ç–∫–æ–Ω–æ–º–∏–∫–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è | `number` (—Ü–µ–Ω–∞ —Å –∏–Ω—Ñ–ª—è—Ü–∏–µ–π) | –†–∞—Å—á–µ—Ç —Ü–µ–Ω —Å —É—á–µ—Ç–æ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º |
| `calculations/loan-calculator.ts` | –ö—Ä–µ–¥–∏—Ç–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä | –°—É–º–º–∞, –°—Ç–∞–≤–∫–∞, –°—Ä–æ–∫ | `MonthlyPayment` | –†–∞—Å—á–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º |
| `calculations/calculateQuarterlyReport.ts` | –ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç | –í—Å–µ –¥–æ—Ö–æ–¥—ã/—Ä–∞—Å—Ö–æ–¥—ã | `QuarterlyReport` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª |
| `calculations/calculatePlayerAssetsAndDebts.ts` | –ê–∫—Ç–∏–≤—ã –∏ –¥–æ–ª–≥–∏ | –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, –ö—Ä–µ–¥–∏—Ç—ã | `NetWorth` | –†–∞—Å—á–µ—Ç —á–∏—Å—Ç–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤ –∏–≥—Ä–æ–∫–∞ |

### üè¢ Business Engine (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/lib/business/` *(–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)*

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏–∏ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| `employee-generator.ts` | `generateEmployeeCandidate`, `generateCandidates` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ —Ä–∞–±–æ—Ç—É |
| `employee-calculations.ts` | `calculateEmployeeKPI` | –†–∞—Å—á–µ—Ç KPI —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ |
| `business-metrics.ts` | `calculateEfficiency`, `calculateReputation` | –†–∞—Å—á–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å–∞ |
| `business-financials.ts` | `calculateBusinessFinancials` | –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –±–∏–∑–Ω–µ—Å–∞ |
| `business-events.ts` | `generateBusinessEvents` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ |
| `npc-voting.ts` | `calculateNPCVote` | –†–∞—Å—á–µ—Ç –≥–æ–ª–æ—Å–∞ NPC –ø–æ –±–∏–∑–Ω–µ—Å-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—é |
| `create-business.ts` | `createBusinessObject`, `createBusinessBranch` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –∏ –µ–≥–æ —Ñ–∏–ª–∏–∞–ª–æ–≤ |
| `validate-business-opening.ts` | `validateBusinessOpening` | –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±–∏–∑–Ω–µ—Å–∞ |
| `business-network.ts` | –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–∑–Ω–µ—Å-—Å–µ—Ç—è–º–∏ (—Ñ–∏–ª–∏–∞–ª–∞–º–∏) |

### üß¨ Life Simulation (–°–∏–º—É–ª—è—Ü–∏—è –ñ–∏–∑–Ω–∏)

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| `calculatePersonalLife.ts` | –õ–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ | –†–∞—Å—á–µ—Ç —Å—á–∞—Å—Ç—å—è, –∑–¥–æ—Ä–æ–≤—å—è –∏ —ç–Ω–µ—Ä–≥–∏–∏ |
| `threshold-effects/` | **–ü–æ—Ä–æ–≥–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã** |
| `threshold-effects/happiness.ts` | `checkHappinessEffects` | –í–ª–∏—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å—á–∞—Å—Ç—å—è –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —Å–æ–±—ã—Ç–∏—è |
| `threshold-effects/health.ts` | `checkHealthEffects` | –í–ª–∏—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –∑–¥–æ—Ä–æ–≤—å—è –Ω–∞ —Ä–∞–±–æ—Ç—É, –º–µ–¥. —Ä–∞—Å—Ö–æ–¥—ã –∏ —Å–æ–±—ã—Ç–∏—è |
| `threshold-effects/sanity.ts` | `checkSanityEffects` | –í–ª–∏—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è |
| `threshold-effects/intelligence.ts` | `checkIntelligenceEffects` | –í–ª–∏—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ |
| `threshold-effects/types.ts` | –¢–∏–ø—ã –¥–ª—è –ø–æ—Ä–æ–≥–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ |
| `defeat-conditions.ts` | `checkDefeatConditions` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã (—Å–º–µ—Ä—Ç—å, –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ –∏ —Ç.–¥.) |
| `generateGlobalEvents.ts` | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π | –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∏–∑–∏—Å–æ–≤, –±—É–º–æ–≤ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π |
| `lifestyle-expenses.ts` | –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ | –†–∞—Å—á–µ—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –µ–¥—É, –∂–∏–ª—å–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç |
| `financial-crisis.ts` | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫—Ä–∏–∑–∏—Å | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∫—Ä–∏–∑–∏—Å–∞ |

### üõ†Ô∏è Helpers (–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—â–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫–∏.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/helpers/`

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
| :--- | :--- | :--- |
| `applyStats.ts` | **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–æ–≤** | `applyStats()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏–≥—Ä–æ–∫–∞ |
| `business-utils.ts` | –ë–∏–∑–Ω–µ—Å-—É—Ç–∏–ª–∏—Ç—ã | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ |
| `debug.ts` | –î–µ–±–∞–≥ —É—Ç–∏–ª–∏—Ç—ã | –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã |
| `idea-generator.ts` | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π | –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∏–¥–µ–π –¥–ª—è –∏–≥—Ä–æ–∫–∞ |
| `initialState.ts` | –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | `createInitialPlayer()` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–∞ |
| `stat-modifiers.ts` | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç–æ–≤ | –†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ç—ã |

---

## 6. üíæ Layer 4: State Management (–°–æ—Å—Ç–æ—è–Ω–∏–µ)
*–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Single Source of Truth) –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.*

**Store:** `core/model/game-store.ts` (Zustand)

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `core/model/`:

| –§–∞–π–ª/–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `game-store.ts` | –ì–ª–∞–≤–Ω—ã–π Zustand store –∏–≥—Ä—ã |
| `store.ts` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ—Ä–∞ |
| `slices/` | **–í—Å–µ —Å–ª–∞–π—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞) |
| `logic/` | –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ö–æ–¥–æ–≤ –∏ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞ |
| `schemas/` | Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| `types/` | TypeScript —Ç–∏–ø—ã –¥–ª—è —Å—Ç–æ—Ä–∞ |

### Slices (–ú–æ–¥—É–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/model/slices/`

| Slice | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ö–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è |
| :--- | :--- | :--- |
| `game-slice.ts` | –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª | `nextTurn`, `initializeGame`, `resetGame` |
| `player-slice.ts` | –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞ | `updatePlayer`, `applyStatChanges` |
| `job-slice.ts` | –†–∞–±–æ—Ç–∞ | `applyForJob`, `acceptJobOffer`, `quitJob` |
| `business-slice.ts` | –ë–∏–∑–Ω–µ—Å | `openBusiness`, `hireEmployee`, `joinBusinessAsEmployee` |
| `business/` | –ü–æ–¥-—Å–ª–∞–π—Å—ã –±–∏–∑–Ω–µ—Å–∞ | |
| `business/core-business-slice.ts` | –ë–∞–∑–æ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏ | `openBusiness`, `closeBusiness` |
| `business/employees-slice.ts` | –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ | `hireEmployee`, `fireEmployee` |
| `business/partnerships-slice.ts` | –ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞ | `addPartnerToBusiness` |
| `business/pricing-production-slice.ts` | –¶–µ–Ω—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ | `changePrice`, `setQuantity` |
| `business/roles-slice.ts` | –†–æ–ª–∏ –≤ –±–∏–∑–Ω–µ—Å–µ | `setPlayerManagerialRoles` |
| `business/shared-business-slice.ts` | –°–æ–≤–º–µ—Å—Ç–Ω—ã–π –±–∏–∑–Ω–µ—Å | `addSharedBusiness` |
| `education-slice.ts` | –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ | `studyCourse`, `applyToUniversity` |
| `family-slice.ts` | –°–µ–º—å—è | `addFamilyMember`, `startDating`, `tryForBaby`, `adoptPet` |
| `notification-slice.ts` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `pushNotification`, `dismissNotification` |
| `shop-slice.ts` | –ú–∞–≥–∞–∑–∏–Ω | `buyItem`, `setLifestyle` |
| `bank-slice.ts` | –ë–∞–Ω–∫ | `openDeposit`, `takeLoan` |
| `market-slice.ts` | –†—ã–Ω–æ–∫ | `updateMarketCondition`, `addMarketEvent` |
| `idea-slice.ts` | –ë–∏–∑–Ω–µ—Å-–∏–¥–µ–∏ | `generateIdea`, `developIdea` |
| `game-offers-slice.ts` | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ | `sendOffer`, `acceptOffer` |
| `index.ts` | –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Å–ª–∞–π—Å–æ–≤ | |
| `types.ts` | –¢–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —Å–ª–∞–π—Å–æ–≤ | |

### üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ State (–û—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏)

1.  **`player`**: –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
    - `stats` ‚Äî –¥–µ–Ω—å–≥–∏, –∑–¥–æ—Ä–æ–≤—å–µ, —Å—á–∞—Å—Ç—å–µ, —ç–Ω–µ—Ä–≥–∏—è, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, —Å–∞–Ω—è
    - `jobs[]` ‚Äî —Ç–µ–∫—É—â–∏–µ —Ä–∞–±–æ—Ç—ã (–≤–∫–ª—é—á–∞—è —Ä–∞–±–æ—Ç—É –≤ —Å–≤–æ–µ–º –±–∏–∑–Ω–µ—Å–µ)
    - `businesses[]` ‚Äî —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–∑–Ω–µ—Å—ã
    - `assets[]` ‚Äî –∞–∫—Ç–∏–≤—ã (–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, –∞–∫—Ü–∏–∏)
    - `debts[]` ‚Äî –¥–æ–ª–≥–∏ –∏ –∫—Ä–µ–¥–∏—Ç—ã
    - `personal` ‚Äî –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–µ–º—å—è, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –Ω–∞–≤—ã–∫–∏)
    
2.  **`game`**: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    - `turn`, `year` ‚Äî —Ç–µ–∫—É—â–∏–π —Ö–æ–¥ –∏ –≥–æ–¥
    - `countries` ‚Äî —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç—Ä–∞–Ω
    - `globalEvents[]` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    - `gameStatus` ‚Äî —Å—Ç–∞—Ç—É—Å –∏–≥—Ä—ã (menu, playing, ended)
    
3.  **`notifications`**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Å–æ–±—ã—Ç–∏—è
4.  **`pendingApplications`**: –ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É/—Ñ—Ä–∏–ª–∞–Ω—Å
5.  **`offers`**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏

### üîÑ Turn Processing Logic

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `core/model/logic/`

| –§–∞–π–ª/–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `turn-logic.ts` | **–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ö–æ–¥–∞** `processTurn()` |
| `business-turn-processor.ts` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å–æ–≤ –∑–∞ —Ö–æ–¥ |
| `turns/` | –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º |
| `turns/education-processor.ts` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ –∫—É—Ä—Å–æ–≤ |
| `turns/jobs-processor.ts` | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ –∑–∞—è–≤–æ–∫ |
| `turns/inflation-processor.ts` | **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ñ–ª—è—Ü–∏–∏** (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ Q1) |
| `turns/financial-processor.ts` | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã –∑–∞ —Ö–æ–¥ |
| `turns/personal-processor.ts` | –õ–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ —Å–µ–º—å—è |
| `turns/lifestyle-processor.ts` | –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ |
| `turns/buffs-processor.ts` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–∞—Ñ—Ñ–æ–≤ |
| `turns/market-processor.ts` | –†—ã–Ω–æ—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è |

---

## 7. üñ•Ô∏è Layer 5: Features & UI (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)
*–ú–æ–¥—É–ª–∏, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞.*

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `features/`

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `features/`:

| Feature Module | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ | –î–µ–π—Å—Ç–≤–∏—è |
| :--- | :--- | :--- | :--- |
| **`activities/`** | –û—Å–Ω–æ–≤–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | | |
| `WorkActivity` | –†–∞–±–æ—Ç–∞ –ø–æ –Ω–∞–π–º—É | `jobs.json` | –£—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—Ç—É |
| `EducationActivity` | –û–±—É—á–µ–Ω–∏–µ | `courses.json` | –£—á–∏—Ç—å—Å—è, –ü–æ—Å—Ç—É–ø–∏—Ç—å –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç |
| `FamilyActivity` | –°–µ–º—å—è | `npcs.json` | –°–≤–∏–¥–∞–Ω–∏–µ, –ó–∞–≤–µ—Å—Ç–∏ —Ä–µ–±–µ–Ω–∫–∞ |
| **`business/`** | –ë–∏–∑–Ω–µ—Å-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç | `businesses.json` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–º |
| **`gameplay/`** | –û—Å–Ω–æ–≤–Ω–æ–π –≥–µ–π–º–ø–ª–µ–π | –í—Å–µ –¥–∞–Ω–Ω—ã–µ | –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å |
| `gameplay-layout.tsx` | –ì–ª–∞–≤–Ω—ã–π layout | | –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã |
| `activities-panel.tsx` | –ü–∞–Ω–µ–ª—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π | | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º |
| `financial-crisis-modal.tsx` | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫—Ä–∏–∑–∏—Å–∞ | | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∫—Ä–∏–∑–∏—Å–∞ |
| **`events/`** | –ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è | | |
| `event-modal.tsx` | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–±—ã—Ç–∏–π | | –ü–æ–∫–∞–∑ —Å–æ–±—ã—Ç–∏–π |
| `economic-events-panel.tsx` | –ü–∞–Ω–µ–ª—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π | | –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ |
| **`menu/`** | –ú–µ–Ω—é –∏–≥—Ä—ã | | |
| `main-menu.tsx` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é | | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é |
| **`multiplayer/`** | –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä | | |
| `MultiplayerHub.tsx` | –•–∞–± –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞ | | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–æ–º |
| `lobby.tsx` | –õ–æ–±–±–∏ –∏–≥—Ä—ã | | –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤ |
| `use-offers-sync.ts` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π | | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Ñ—Ñ–µ—Ä–æ–≤ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ |
| **`notifications/`** | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | | |
| `inflation-notification.tsx` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–Ω—Ñ–ª—è—Ü–∏–∏ | | –ü–æ–∫–∞–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–Ω—Ñ–ª—è—Ü–∏–∏ |
| `offers-list.tsx` | –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π | | –°–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö –æ—Ñ—Ñ–µ—Ä–æ–≤ |
| `offer-card.tsx` | –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è | | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è |
| **`reports/`** | –û—Ç—á–µ—Ç—ã | | |
| `year-report-modal.tsx` | –ì–æ–¥–æ–≤–æ–π –æ—Ç—á–µ—Ç | | –ü–æ–∫–∞–∑ –≥–æ–¥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ |
| **`setup/`** | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä—ã | | |
| `character-selector.tsx` | –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ | | –í—ã–±–æ—Ä –∞—Ä—Ö–µ—Ç–∏–ø–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ |
| `country-selector.tsx` | –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã | | –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã –¥–ª—è –∏–≥—Ä—ã |
| **`end/`** | –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã | | |
| `game-end-screen.tsx` | –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã | | –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä—ã |

### üé≠ Shared Components (–û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `shared/ui/`

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `top-bar/` | –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∏–≥—Ä—ã | |
| `top-status-bar.tsx` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç–∞—Ç—É—Å-–ø–∞–Ω–µ–ª—å | –ü–æ–∫–∞–∑ –≤—Å–µ—Ö —Å—Ç–∞—Ç–æ–≤ |
| `money-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–µ–Ω–µ–≥ | |
| `happiness-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—á–∞—Å—Ç—å—è | |
| `health-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è | |
| `energy-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —ç–Ω–µ—Ä–≥–∏–∏ | |
| `sanity-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è | |
| `intelligence-indicator.tsx` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ | |
| `notifications-menu.tsx` | –ú–µ–Ω—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | |
| `button.tsx` | –ö–Ω–æ–ø–∫–∏ | –í—Å–µ –∫–Ω–æ–ø–∫–∏ –≤ –∏–≥—Ä–µ |
| `card.tsx` | –ö–∞—Ä—Ç–æ—á–∫–∏ | –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
| `dialog.tsx` | –î–∏–∞–ª–æ–≥–∏ | –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ |
| `input.tsx` | –ü–æ–ª—è –≤–≤–æ–¥–∞ | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è, —Å–µ–ª–µ–∫—Ç—ã |
| `label.tsx` | –õ–µ–π–±–ª—ã | –ü–æ–¥–ø–∏—Å–∏ –∫ –ø–æ–ª—è–º |
| `progress.tsx` | –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ |
| `slider.tsx` | –°–ª–∞–π–¥–µ—Ä—ã | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π |
| `select.tsx` | –°–µ–ª–µ–∫—Ç—ã | –í—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ |
| `alert-dialog.tsx` | –ê–ª–µ—Ä—Ç-–¥–∏–∞–ª–æ–≥–∏ | –î–∏–∞–ª–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| `badge.tsx` | –ë–µ–π–¥–∂–∏ | –°—Ç–∞—Ç—É—Å-–º–µ—Ç–∫–∏ |
| `expandable-card.tsx` | –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ | –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏ |
| `feedback-animation.tsx` | –ê–Ω–∏–º–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ | –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–µ–∞–∫—Ü–∏–π |
| `info-card.tsx` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ | –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π |
| `section-separator.tsx` | –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Å–µ–∫—Ü–∏–π | –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ |

---

## 8. üîÑ –ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –¶–µ–Ω—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ
*–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –≤—Å–µ 5 —Å–ª–æ—ë–≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.*

### Layer 1: Static Data (JSON)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `shared/data/world/countries/{country}/shop-categories/*.json`

```json
// food.json - –±–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤
{
  "id": "food_cheap_burger",
  "name": "–î–µ—à—ë–≤—ã–π –±—É—Ä–≥–µ—Ä",
  "price": 5,           // ‚Üê –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞
  "category": "food",
  "effects": { "energy": 5, "health": -1 }
}

// economy.json - —ç–∫–æ–Ω–æ–º–∏–∫–∞ —Å—Ç—Ä–∞–Ω—ã
{
  "inflation": 2.5,     // ‚Üê –¢–µ–∫—É—â–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è
  "inflationHistory": [2.5, 2.3, 2.7]  // ‚Üê –ò—Å—Ç–æ—Ä–∏—è –¥–ª—è –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞
}
```

### Layer 2: Data Loaders (Zod)
**–ü—É—Ç—å:** `core/lib/data-loaders/`

```typescript
// shop-categories-loader.ts
export function loadShopItemsForCountry(countryId: string): ShopItem[] {
  const items = JSON.parse(fs.readFileSync(`.../${countryId}/shop-categories/food.json`))
  return ShopItemSchema.array().parse(items) // Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è
}

// economy-loader.ts
export function getCountry(countryId: string): CountryEconomy {
  const data = JSON.parse(fs.readFileSync(`.../countries/${countryId}/economy.json`))
  return EconomySchema.parse(data)
}
```

### Layer 3: Core Logic (Calculations)
**–ü—É—Ç—å:** `core/lib/calculations/price-helpers.ts`

```typescript
// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏ –∫ —Ü–µ–Ω–∞–º
export function getInflatedPrice(
  basePrice: number,
  economy: CountryEconomy,
  category: 'food' | 'housing' | 'education' = 'default'
): number {
  const history = economy.inflationHistory || []
  
  // –ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
  const multipliers = {
    housing: 1.5,    // –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –±—ã—Å—Ç—Ä–µ–µ
    food: 0.5,       // –ï–¥–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
    education: 1.2,
    default: 1.0
  }
  
  const multiplier = multipliers[category]
  
  // –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è –∑–∞ –≤—Å–µ –≥–æ–¥—ã
  let inflatedPrice = basePrice
  for (const yearInflation of history) {
    inflatedPrice *= (1 + (yearInflation / 100) * multiplier)
  }
  
  return Math.round(inflatedPrice)
}

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
export function getInflatedShopPrice(item: ShopItem, economy: CountryEconomy): number {
  return getInflatedPrice(item.price, economy, 'food')
}
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
```typescript
// –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: $5
// –ò–Ω—Ñ–ª—è—Ü–∏—è –≥–æ–¥ 1: 2.5%, –≥–æ–¥ 2: 2.7%
// –ö–∞—Ç–µ–≥–æ—Ä–∏—è: food (multiplier 0.5)

// –ì–æ–¥ 1: $5 * (1 + 2.5% * 0.5) = $5.06
// –ì–æ–¥ 2: $5.06 * (1 + 2.7% * 0.5) = $5.13
```

### Layer 4: State Management (Zustand)
**–ü—É—Ç—å:** `core/model/store.ts`

```typescript
// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
interface GameState {
  game: {
    countries: Record<string, CountryEconomy> // –≠–∫–æ–Ω–æ–º–∏–∫–∞ —Å –∏–Ω—Ñ–ª—è—Ü–∏–µ–π
  }
  player: {
    stats: { money: number }
    countryId: string
  }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –≤ Q1)
// core/model/logic/turns/inflation-processor.ts
export function processInflation(state: GameState) {
  const country = state.game.countries[state.player.countryId]
  const newInflation = generateYearlyInflation(country) // Layer 3
  
  country.inflation = newInflation
  country.inflationHistory = [newInflation, ...country.inflationHistory.slice(0, 9)]
}
```

### Layer 5: UI Components (React)

#### 5.1 UI Hook (React –ª–æ–≥–∏–∫–∞)
**–ü—É—Ç—å:** `features/activities/shop/useShopPricing.ts`

```typescript
export function useShopPricing(
  item: ShopItem,
  category: ShopCategory,
  country: CountryEconomy | undefined,
  playerMoney: number
) {
  const displayPrice = useMemo(() => {
    if (!country) return item.price
    
    // –í—ã–∑–æ–≤ domain —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ Layer 3
    if (item.category === 'housing') {
      return getInflatedHousingPrice(item, country)
    }
    return getInflatedShopPrice(item, country)
  }, [item, country])
  
  const canAfford = playerMoney >= displayPrice
  const isRecurring = category.isRecurring || false
  
  return { displayPrice, canAfford, isRecurring }
}
```

#### 5.2 UI Formatter (–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
**–ü—É—Ç—å:** `features/activities/shop/utils/formatters.ts`

```typescript
export function formatPrice(price: number): string {
  return `$${price.toLocaleString()}`
}
```

#### 5.3 UI Component (–†–µ–Ω–¥–µ—Ä)
**–ü—É—Ç—å:** `features/activities/shop/components/ShopItemCard.tsx`

```tsx
export function ShopItemCard({ item, category, country, playerMoney }: Props) {
  // UI —Ö—É–∫ –≤—ã–∑—ã–≤–∞–µ—Ç domain –ª–æ–≥–∏–∫—É
  const { displayPrice, canAfford, isRecurring } = useShopPricing(
    item,
    category,
    country,
    playerMoney
  )
  
  return (
    <Card>
      {/* –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */}
      <Button disabled={!canAfford}>
        –ö—É–ø–∏—Ç—å –∑–∞ {formatPrice(displayPrice)}
      </Button>
      
      {isRecurring && (
        <span>{formatPrice(displayPrice)}/–∫–≤–∞—Ä—Ç–∞–ª</span>
      )}
    </Card>
  )
}
```

### –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
Layer 1: JSON —Ñ–∞–π–ª—ã (food.json, economy.json)
   ‚Üì (fs.readFileSync)
Layer 2: Data Loaders (Zod validation)
   ‚Üì (—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã: ShopItem[], CountryEconomy)
Layer 3: Core Logic (getInflatedPrice, getInflatedShopPrice)
   ‚Üì (—á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, domain —Ä–∞—Å—á—ë—Ç—ã)
Layer 4: State Management (Zustand store)
   ‚Üì (useGameStore —Å–µ–ª–µ–∫—Ç–æ—Ä—ã)
Layer 5: UI
   ‚îú‚îÄ useShopPricing (—Ö—É–∫) ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç Layer 3
   ‚îú‚îÄ formatPrice (—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä) ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   ‚îî‚îÄ ShopItemCard (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç) ‚Üí —Ä–µ–Ω–¥–µ—Ä
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

| –°–ª–æ–π | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä |
|------|----------------|--------|
| **Layer 3 (core/lib/)** | Domain —Ä–∞—Å—á—ë—Ç—ã | `getInflatedPrice()` |
| **Layer 5 (features/)** | UI –ª–æ–≥–∏–∫–∞ | `useShopPricing()` –≤—ã–∑—ã–≤–∞–µ—Ç Layer 3 |
| **Layer 5 (features/)** | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `formatPrice()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è |

**–ü—Ä–∞–≤–∏–ª–æ:** UI —Ö—É–∫–∏ **–≤—ã–∑—ã–≤–∞—é—Ç** domain —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ **–ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç** domain —Ä–∞—Å—á—ë—Ç—ã.

---

## 9. üåê Multiplayer Offers System (–°–∏—Å—Ç–µ–º–∞ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)
*–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.*

### –¢–∏–ø—ã –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (`GameOffer`)
1. **Job Offer**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –æ—Ç –∏–≥—Ä–æ–∫–∞-–≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–∏–∑–Ω–µ—Å–∞ –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É.
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ (—Å–ª–∞–π–¥–µ—Ä –¥–æ $1,000,000 + —Ä—É—á–Ω–æ–π –≤–≤–æ–¥).
   - KPI –±–æ–Ω—É—Å—ã.

2. **Partnership Offer**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—å –±–∏–∑–Ω–µ—Å —Å–æ–≤–º–µ—Å—Ç–Ω–æ.
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ–ª–µ–π (10-90%).
   - –°–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏.

3. **Share Sale Offer**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫—É–ø–∏—Ç—å –¥–æ–ª—é –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –±–∏–∑–Ω–µ—Å–µ (Planned).

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `connectionId` –æ—Ç Liveblocks –¥–ª—è —Ç–æ—á–Ω–æ–π –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –æ—Ñ—Ñ–µ—Ä–æ–≤.
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –•—É–∫ `useOffersSync` —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç.
- **UI**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `OfferCard` –∏ `OffersList` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Liveblocks)
```mermaid
sequenceDiagram
    participant P1 as Player 1 (Sender)
    participant LB as Liveblocks Room
    participant P2 as Player 2 (Receiver)
    
    P1->>LB: broadcastEvent({ type: 'OFFER_SENT', payload: offer })
    LB->>P2: Event Received
    P2->>P2: useOffersSync() -> Add to Store
    P2->>P2: Show Notification & OfferCard
    
    alt Accept
        P2->>LB: broadcastEvent({ type: 'OFFER_ACCEPTED' })
        P2->>P2: Execute Action (Join Job / Open Business)
    else Reject
        P2->>LB: broadcastEvent({ type: 'OFFER_REJECTED' })
    end
    
    LB->>P1: Event Received (Status Update)
    P1->>P1: Update Offer Status -> Show Notification
```

---

## 9. üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫ –∏ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **Core**: TypeScript, React 18, Next.js 14
- **State**: Zustand (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ slices)
- **Validation**: Zod (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JSON –∏ Save-—Ñ–∞–π–ª–æ–≤)
- **Styling**: Tailwind CSS + CSS Modules
- **Testing**: Vitest (Unit tests for calculations)
- **Persistence**: LocalStorage + SuperJSON (—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- **Multiplayer**: Liveblocks (real-time collaboration)
- **Build Tool**: pnpm (package manager)

---

## 10. üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ü—Ä–æ–µ–∫—Ç–∞

### –ö–æ–¥
- **TypeScript —Ñ–∞–π–ª–æ–≤**: 111+
- **React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 50+
- **–ú–æ–¥—É–ª–µ–π –ª–æ–≥–∏–∫–∏**: 100+
- **–¢–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**: 200+

### –î–∞–Ω–Ω—ã–µ
- **JSON —Ñ–∞–π–ª–æ–≤**: 88+
- **–°—Ç—Ä–∞–Ω**: 3 (US, Germany, Brazil)
- **–ë–∏–∑–Ω–µ—Å–æ–≤**: 12+ (4 –Ω–∞ —Å—Ç—Ä–∞–Ω—É)
- **–†–∞–±–æ—Ç**: 30+ (10 –Ω–∞ —Å—Ç—Ä–∞–Ω—É)
- **–¢–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ**: 50+

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–°–ª–æ–µ–≤**: 5 (Data ‚Üí Loaders ‚Üí Logic ‚Üí State ‚Üí UI)
- **Slices**: 15+ (–º–æ–¥—É–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- **Loaders**: 15+ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
- **Processors**: 8+ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–æ–≤)

---

## 11. üöÄ Quick Start (–ö–æ–º–∞–Ω–¥—ã)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# 2. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pnpm dev

# 3. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Production Build)
pnpm build

# 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏)
pnpm test

# 5. –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
pnpm lint
```

---

## 12. üìù –ö–ª—é—á–µ–≤—ã–µ –ü—Ä–∏–Ω—Ü–∏–ø—ã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: UI –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
2. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Zod
3. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–æ–¥ —Ä–∞–∑–±–∏—Ç –Ω–∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏
4. **Data-Driven**: –ë–∞–ª–∞–Ω—Å –∏–≥—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JSON
5. **Immutability**: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ actions
6. **Testability**: –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è
7. **Runtime Validation**: –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## 13. üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ Roadmap

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–æ–≤** (6 –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π)
- **–ë–∏–∑–Ω–µ—Å-—Å–∏—Å—Ç–µ–º–∞** (–æ—Ç–∫—Ä—ã—Ç–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
- **–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ñ–ª—è—Ü–∏–∏** (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ä–æ—Å—Ç —Ü–µ–Ω)
- **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (–∫—É—Ä—Å—ã, –Ω–∞–≤—ã–∫–∏)
- **–°–µ–º–µ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (–æ—Ç–Ω–æ—à–µ–Ω–∏—è, –¥–µ—Ç–∏, –ø–∏—Ç–æ–º—Ü—ã)
- **–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** (–Ω–∞–π–º –∏–≥—Ä–æ–∫–æ–≤)

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- **–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–º –ø–æ –¥–æ–ª—è–º**
- **–ü—Ä–∏–Ω—è—Ç–∏–µ –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–π –ø–æ –¥–æ–ª—è–º** (—Ü–µ–Ω–∞, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –Ω–∞–π–º)
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞**

### üìã –ü–ª–∞–Ω—ã:
1. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** - –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–µ—Ç–∞-—Ç–µ—Å—Ç–æ–≤ –∏ –ø–µ—Ä–≤—ã—Ö –∏–≥—Ä
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –≤—ã–∏–≥—Ä—ã—à–∞—Ö/–ø—Ä–æ–∏–≥—Ä—ã—à–∞—Ö –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏** - –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024-12-05
**–í–µ—Ä—Å–∏—è**: 2.0
**–°—Ç–∞—Ç—É—Å**: –ë–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–ª–∞–Ω—Å–∞
**–ü—Ä–∏–Ω—Ü–∏–ø –∏–≥—Ä—ã**: "–£—á–∏—Ç—å—Å—è –∂–∏—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ"