# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Partner not found"

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É/–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º –±–∏–∑–Ω–µ—Å–µ (50/50) –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
```
Partner not found for business: biz_1765560665801
```

## –ü—Ä–∏—á–∏–Ω–∞
–í —Ñ—É–Ω–∫—Ü–∏–∏ `createPartnerBusiness` –≤ –º–∞—Å—Å–∏–≤ `partners` –¥–æ–±–∞–≤–ª—è–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–∞—Ä—Ç–Ω—ë—Ä (–¥—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫), –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–ª—Å—è —Å–∞–º —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `getBusinessPartner` –Ω–µ –º–æ–≥–ª–∞ –Ω–∞–π—Ç–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. `create-partner-business.ts` ‚úÖ
–î–æ–±–∞–≤–ª–µ–Ω—ã **–æ–±–∞** –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –º–∞—Å—Å–∏–≤ `partners`:
- –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫
- –ü–∞—Ä—Ç–Ω—ë—Ä (–¥—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫)

```typescript
partners: [
  // –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫
  {
    id: playerId,
    name: '–í—ã',
    type: 'player' as const,
    share: offer.details.yourShare,
    investedAmount: offer.details.yourInvestment,
    relation: 100,
  },
  // –ü–∞—Ä—Ç–Ω—ë—Ä
  {
    id: offer.fromPlayerId,
    name: offer.fromPlayerName,
    type: 'player' as const,
    share: 100 - offer.details.yourShare,
    investedAmount: offer.details.totalCost - offer.details.yourInvestment,
    relation: 50,
  },
],
```

### 2. `partnership-permissions.ts` ‚úÖ
–£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getBusinessPartner`:
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò–∑–º–µ–Ω—ë–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∏—Å–∫–∞ (—Å–Ω–∞—á–∞–ª–∞ –≤ `partners`, –ø–æ—Ç–æ–º –≤ `partnerId`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `partnerBusinessId` –∏–∑ –±–∏–∑–Ω–µ—Å–∞

### 3. `partnership-business-slice.ts` ‚úÖ
–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `proposeBusinessChange`:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏—è

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```bash
Ctrl + Shift + R (–∏–ª–∏ Cmd + Shift + R –Ω–∞ Mac)
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ 50/50
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É –≤ –¥–≤—É—Ö –≤–∫–ª–∞–¥–∫–∞—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–µ
3. –ü—Ä–∏–º–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ

### 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–º
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ü–µ–Ω—É —Å –ø–æ–º–æ—â—å—é —Å–ª–∞–π–¥–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
[proposeBusinessChange] Starting: {businessId: "biz_...", changeType: "price", ...}
[proposeBusinessChange] Business found: {id: "biz_...", name: "...", partnersCount: 2}
[getBusinessPartner] Searching for partner: {...}
[getBusinessPartner] Found partner in partners array: {id: "player_1", name: "Player"}
[proposeBusinessChange] Partner found: {id: "player_1", name: "Player", businessId: "..."}
[proposeBusinessChange] Broadcasting event to partner: player_1
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
- –£ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤ —Å–µ–∫—Ü–∏–∏ BusinessProposals

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```typescript
partners: [
  {
    id: offer.fromPlayerId,  // –¢–æ–ª—å–∫–æ –ø–∞—Ä—Ç–Ω—ë—Ä
    name: offer.fromPlayerName,
    ...
  },
]
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```typescript
partners: [
  {
    id: playerId,  // –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫
    name: '–í—ã',
    ...
  },
  {
    id: offer.fromPlayerId,  // –ü–∞—Ä—Ç–Ω—ë—Ä
    name: offer.fromPlayerName,
    ...
  },
]
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
1. ‚úÖ `core/lib/business/create-partner-business.ts`
2. ‚úÖ `core/lib/business/partnership-permissions.ts`
3. ‚úÖ `core/model/slices/partnership-business-slice.ts`

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ:
1. –£–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ console.log (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ)
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π (hire, fire, freeze)
3. –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

## –û—Ç–ª–∞–¥–∫–∞
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:
1. `partnersCount` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å = 2
2. `partners` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–±–∞ ID –∏–≥—Ä–æ–∫–æ–≤
3. `getBusinessPartner` –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –º–∞—Å—Å–∏–≤–µ
