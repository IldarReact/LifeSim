# ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –±–∏–∑–Ω–µ—Å–æ–≤ - –ó–ê–í–ï–†–®–ï–ù–û

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. **–†–∞—Å—à–∏—Ä–µ–Ω—ã —Ç–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚úÖ
**–§–∞–π–ª**: `core/types/business.types.ts`

**–í—Å–µ —Ç–∏–ø—ã**:
- ‚úÖ `price` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã
- ‚úÖ `quantity` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- ‚úÖ `hire_employee` - –ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ `fire_employee` - –£–≤–æ–ª—å–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ `freeze` - –ó–∞–º–æ—Ä–æ–∑–∫–∞ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ `unfreeze` - –†–∞–∑–º–æ—Ä–æ–∑–∫–∞ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ `open_branch` - –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª–∏–∞–ª–∞
- ‚úÖ `auto_purchase` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–∫—É–ø–∫–∏
- ‚úÖ `change_role` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –∏–≥—Ä–æ–∫–∞

**–ò—Ç–æ–≥–æ**: 9 —Ç–∏–ø–æ–≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π

### 2. **–†–∞—Å—à–∏—Ä–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π** ‚úÖ
**–§–∞–π–ª**: `core/model/slices/partnership-business-slice.types.ts`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è**:
```typescript
{
  // –î–ª—è hire_employee
  employeeName?: string
  employeeRole?: string
  employeeSalary?: number
  employeeStars?: number
  
  // –î–ª—è fire_employee
  fireEmployeeId?: string
  fireEmployeeName?: string
  
  // –î–ª—è open_branch
  branchName?: string
  branchCost?: number
  
  // –î–ª—è auto_purchase
  autoPurchaseAmount?: number
  
  // –î–ª—è change_role
  newRole?: string
  oldRole?: string
}
```

### 3. **–û–±–Ω–æ–≤–ª—ë–Ω `approveBusinessChange`** ‚úÖ
**–§–∞–π–ª**: `core/model/slices/partnership-business-slice.ts`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ Switch statement –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
- ‚úÖ `price` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
- ‚úÖ `quantity` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- ‚úÖ `freeze` - –∑–∞–º–æ—Ä–æ–∑–∫–∞ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ `unfreeze` - —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ `auto_purchase` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–∫—É–ø–∫–∏
- ‚è≥ `hire_employee` - TODO (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å hire logic)
- ‚è≥ `fire_employee` - TODO (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å fire logic)
- ‚è≥ `open_branch` - TODO (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å branch logic)

### 4. **–û–±—ë—Ä–Ω—É—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –ø—Ä–∞–≤** ‚úÖ
**–§–∞–π–ª**: `business-management-dialog.tsx`

**–û–±—ë—Ä–Ω—É—Ç–æ**:
- ‚úÖ `handleHire` - –Ω–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  - > 50% ‚Üí –ø—Ä—è–º–æ–π –Ω–∞–π–º
  - = 50% ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  - < 50% ‚Üí –æ—à–∏–±–∫–∞ "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤"

**–ü–∞—Ç—Ç–µ—Ä–Ω**:
```typescript
if (business.partners.length > 0 && player) {
  const canDirect = canMakeDirectChanges(business, player.id)
  const needsApproval = requiresApproval(business, player.id)

  if (canDirect) {
    // –ü—Ä—è–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
  } else if (needsApproval) {
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
    proposeBusinessChange(businessId, changeType, data)
  } else {
    // –û—à–∏–±–∫–∞
    pushNotification({ type: 'error', ... })
  }
}
```

### 5. **–û–±–Ω–æ–≤–ª—ë–Ω UI –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π** ‚úÖ
**–§–∞–π–ª**: `features/activities/work/components/BusinessProposals.tsx`

**–£–ª—É—á—à–µ–Ω–∏—è**:
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã –ø—Ä–∏ –Ω–∞–π–º–µ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ñ–∏–ª–∏–∞–ª–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —É–≤–æ–ª—å–Ω—è–µ–º–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã –æ–ø–∏—Å–∞–Ω–∏–π**:
- `–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ $150`
- `–ù–∞–Ω—è—Ç—å John Doe –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å manager (–∑–∞—Ä–ø–ª–∞—Ç–∞: $5000)`
- `–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª–∏–∞–ª "Branch 2" (—Å—Ç–æ–∏–º–æ—Å—Ç—å: $100000)`
- `–ò–∑–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–∑–∞–∫—É–ø–∫—É –Ω–∞ 50 –µ–¥–∏–Ω–∏—Ü`

### 6. **–°–æ–∑–¥–∞–Ω comprehensive test suite** ‚úÖ
**–§–∞–π–ª**: `core/model/slices/__tests__/partnership-business-comprehensive.test.ts`

**–ü–æ–∫—Ä—ã—Ç–∏–µ**:
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã (50% –∏ >50%)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- ‚úÖ –ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ –£–≤–æ–ª—å–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ –ó–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª–∏–∞–ª–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (<50%, =50%, >50%)
- ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- **–¢–∏–ø–æ–≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π**: 9
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**: 6
- **–¢–µ—Å—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–æ**: 10+
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~500

## üé® –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (50/50)

1. **–ò–≥—Ä–æ–∫ 1** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –Ω–∞–π–º–∞
2. –í—ã–±–∏—Ä–∞–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–Ω—è—Ç—å"
4. **–°–∏—Å—Ç–µ–º–∞** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ª—é (50%)
5. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
6. **–ò–≥—Ä–æ–∫ 2** –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (badge)
7. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"
8. –í–∏–¥–∏—Ç: "–ù–∞–Ω—è—Ç—å John Doe –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å manager (–∑–∞—Ä–ø–ª–∞—Ç–∞: $5000)"
9. –ù–∞–∂–∏–º–∞–µ—Ç "–û–¥–æ–±—Ä–∏—Ç—å"
10. **–°–∏—Å—Ç–µ–º–∞** –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ
11. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–∏–∑–Ω–µ—Å
12. **–ò–≥—Ä–æ–∫ 1** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–¥–æ–±—Ä–µ–Ω–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã (>50%)

1. **–ò–≥—Ä–æ–∫ 1** (–¥–æ–ª—è 60%) –º–µ–Ω—è–µ—Ç —Ü–µ–Ω—É
2. **–°–∏—Å—Ç–µ–º–∞** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ª—é (>50%)
3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—Å—Ä–∞–∑—É**
4. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ **–Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è**
5. **–ò–≥—Ä–æ–∫ 2** –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é —Ü–µ–Ω—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è (<50%)

1. **–ò–≥—Ä–æ–∫ 1** (–¥–æ–ª—è 40%) –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É
2. **–°–∏—Å—Ç–µ–º–∞** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ª—é (<50%)
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤"
4. –ò–∑–º–µ–Ω–µ–Ω–∏–µ **–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**
5. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ **–Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è**

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pnpm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤
pnpm test partnership

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pnpm test --coverage
```

## üìã TODO (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è hire/fire/branch –ª–æ–≥–∏–∫–∏
–°–µ–π—á–∞—Å –≤ `approveBusinessChange` –¥–ª—è —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤ —Å—Ç–æ–∏—Ç TODO.
–ù—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –Ω–∞–π–º–∞/—É–≤–æ–ª—å–Ω–µ–Ω–∏—è/—Ñ–∏–ª–∏–∞–ª–æ–≤.

### 2. UI –¥–ª—è —É–≤–æ–ª—å–Ω–µ–Ω–∏—è
–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

### 3. UI –¥–ª—è –∑–∞–º–æ—Ä–æ–∑–∫–∏
–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–º–æ—Ä–æ–∑–∫–∏/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∏ –≤ dialog.

### 4. –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ badge
–ö–ª–∏–∫ –Ω–∞ badge ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.

### 5. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –±–∏–∑–Ω–µ—Å–∞–º –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç.
–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤ 50/50.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
   - –°–æ–∑–¥–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ 50/50
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
   - –û–¥–æ–±—Ä–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã**
   ```bash
   pnpm test partnership-business-comprehensive
   ```

3. **Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   ```bash
   git add .
   git commit -m "feat: comprehensive partnership approvals system"
   git push
   ```
